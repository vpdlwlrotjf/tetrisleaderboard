<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Tetris Leaderboard</title>
<style>
  body{background:#000;color:#fff;font-family:Arial;text-align:center;padding:30px;}
  .board{display:inline-block;background:#111;border:4px solid #333;padding:20px;width:420px;}
  h1{color:#ffd700;font-family:monospace;margin:0 0 12px 0}
  table{width:100%;border-collapse:collapse}
  td{padding:8px;border-bottom:1px solid #222;font-family:monospace;}
  .rank{color:#00ff00;width:40px}
  .score{color:#ffcc00;text-align:right;width:80px}
  .name{color:#fff;text-align:left}
</style>
</head>
<body>
  <h1> 테트리스로 반포자이 입성 </h1>
  <div class="board">
    <table id="tbl">
      <tr><th class="rank">Rank</th><th class="name">Name</th><th class="score">Score</th></tr>
    </table>
  </div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbytYNMAZymvswudM7Sn_WcwaPp7QumtlndFYmwFEyLdPd1eZdqwmxs2mV_ljQgTK6U/exec";

async function loadScores(){
  try {
    const res = await fetch(API_URL);
    const data = await res.json();

    const table = document.getElementById("tbl");
    table.innerHTML = `
      <tr>
        <th class="rank">Rank</th>
        <th class="name">Name</th>
        <th class="score">Score</th>
      </tr>
    `;

    data.sort((a,b)=> b.score - a.score).forEach((row, i) => {
      table.innerHTML += `
      <tr>
        <td class="rank">${i+1}</td>
        <td class="name">${row.name}</td>
        <td class="score">${row.score}</td>
      </tr>`;
    });

  } catch(err) {
    console.error(err);
    document.body.innerHTML = `<p style="color:red;">⚠ 데이터 불러오기 오류: ${err.message}</p>`;
  }
}

// 처음 실행 + 5초마다 갱신
loadScores();
setInterval(loadScores, 5000);
</script>

</body>
</html>



