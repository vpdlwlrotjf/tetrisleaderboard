<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Tetris Leaderboard</title>
<style>
  body{background:#000;color:#fff;font-family:Arial;text-align:center;padding:30px;}
  .board{display:inline-block;background:#111;border:4px solid #333;padding:20px;width:420px;}
  h1{color:#ffd700;font-family:monospace;margin:0 0 12px 0}
  table{width:100%;border-collapse:collapse}
  td{padding:8px;border-bottom:1px solid #222;font-family:monospace;}
  .rank{color:#00ff00;width:40px}
  .score{color:#ffcc00;text-align:right;width:80px}
  .name{color:#fff;text-align:left}


  .note {
    font-size: 12px;
    color: #777;
    margin-top: 10px;
</style>
</head>
<body>
  <h1> 테트리스로 반포자이 입성 </h1>
  <div class="board">
    <table id="tbl">
      <tr><th class="rank">Rank</th><th class="name">Name</th><th class="score">Score</th></tr>
    </table>

      <p class="note"> 랭킹 갱신은 최대 2~3분 소요될 수 있습니다 <br>
                       제작자: 통신공학과 최지훈 <br> &nbsp;&nbsp;&nbsp; 통신공학과 송우진.</p>
  </div>
  </div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzBQ4WQKRJMYEMcL1_McSYNG29WfHAZhD5sfgOTZVlPgU-bNO_9itl24wu1M2065i9d/exec";

function handleLeaderboard(data) {
  const table = document.getElementById("tbl");
  table.innerHTML = `<tr><th>Rank</th><th>Name</th><th>Score</th></tr>`;

  data.sort((a,b)=>b.score-a.score).slice(0,10).forEach((r,i)=>{
    table.innerHTML += `
      <tr>
        <td>${i+1}</td>
        <td>${r.name}</td>
        <td>${r.score}</td>
      </tr>
    `;
  });
}

function refresh() {
  const old = document.getElementById("jsonp");
  if(old) old.remove();

  const s = document.createElement("script");
  s.id="jsonp";
  s.src = `${API_URL}?callback=handleLeaderboard&_=${Date.now()}`;
  document.body.appendChild(s);
}

refresh();
setInterval(refresh, 5000);
</script>

</body>
</html>






